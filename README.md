# å–µå’•åå°ç®¡ç†å¹³å° API

æ¬¢è¿æ¥åˆ°**å–µå’•åå°ç®¡ç†å¹³å° API**çš„ä½¿ç”¨æŒ‡å—ï¼è¿™é‡Œæ˜¯ä¸€ä¸ªåŸºäº**Express.js**ã€**GraphQL**å’Œ**MongoDB**æ„å»ºçš„åå°ç®¡ç†APIï¼Œæ—¨åœ¨ä¸ºå–µå’•èŠå¤©å¹³å°æä¾›é«˜æ•ˆçš„ç®¡ç†åŠŸèƒ½ã€‚é€šè¿‡è¿™ä¸ªAPIï¼Œç®¡ç†å‘˜å¯ä»¥è½»æ¾ç®¡ç†ç”¨æˆ·ã€å¥½å‹å’Œæ¶ˆæ¯ç­‰æ•°æ®ï¼Œäº«å—ç®€å•è€Œå¼ºå¤§çš„ç®¡ç†ä½“éªŒï¼âœ¨

## ğŸ“ é¡¹ç›®ç®€ä»‹

å–µå’•åå°ç®¡ç†å¹³å° API æ˜¯ä¸€ä¸ªä½¿ç”¨çº¯JavaScriptå®ç°çš„GraphQL APIï¼Œæ”¯æŒç®¡ç†å‘˜è¿›è¡Œå„ç§æ•°æ®æ“ä½œï¼ŒåŒ…æ‹¬ç”¨æˆ·ç®¡ç†ã€å¥½å‹ç®¡ç†å’Œæ¶ˆæ¯ç®¡ç†ç­‰ã€‚é€šè¿‡çµæ´»çš„æŸ¥è¯¢å’Œå˜æ›´ï¼Œç®¡ç†å‘˜å¯ä»¥é«˜æ•ˆåœ°ä¸æ•°æ®åº“äº¤äº’ï¼Œè½»æ¾ç®¡ç†å¹³å°çš„æ•°æ®ã€‚ (ï½¡â€¢Ì€á´—-)âœ§

## ğŸš€ æŠ€æœ¯æ ˆ

- **Express.js**: è½»é‡çº§çš„Node.js webæ¡†æ¶ï¼Œå¿«é€Ÿæ„å»ºAPIã€‚
- **GraphQL**: å¼ºå¤§çš„æŸ¥è¯¢è¯­è¨€ï¼Œæä¾›çµæ´»çš„æ•°æ®è·å–æ–¹å¼ã€‚
- **MongoDB**: é«˜æ•ˆçš„NoSQLæ•°æ®åº“ï¼Œå­˜å‚¨å¹³å°æ•°æ®ã€‚
- **Apollo Server**: ç¤¾åŒºé©±åŠ¨çš„GraphQLæœåŠ¡å™¨ï¼ŒåŠ©ä½ è½»æ¾æ„å»ºAPIã€‚
- **Bcrypt.js**: ç”¨äºå®‰å…¨çš„å¯†ç å“ˆå¸Œå¤„ç†ï¼Œä¿æŠ¤ç”¨æˆ·éšç§ã€‚
- **jsonwebtoken**: ç”¨äºç”Ÿæˆå’ŒéªŒè¯JWTï¼ˆJSON Web Tokensï¼‰ã€‚
- **dotenv**: ç”¨äºç®¡ç†ç¯å¢ƒå˜é‡ï¼Œé…ç½®çµæ´»æ–¹ä¾¿ã€‚

## ğŸ“¦ å®‰è£…ä¸è¿è¡Œ

1. **å…‹éš†é¡¹ç›®**

   ```bash
   git clone https://github.com/hhyufan/miaogu_admin_api.git
   cd miaogu_admin_api
   ```

2. **å®‰è£…ä¾èµ–**

   ä½¿ç”¨npmå®‰è£…é¡¹ç›®ä¾èµ–ï¼š

   ```bash
   npm install
   ```

3. **é…ç½®ç¯å¢ƒå˜é‡**

   åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º`.env`çš„æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

   ```
   PORT=4000
   DB_HOST=mongodb://localhost:27017/miaogu
   JWT_SECRET=your_jwt_secret
   ```

4. **è¿è¡Œé¡¹ç›®**

   å¯åŠ¨APIæœåŠ¡å™¨ï¼š

   ```bash
   npm start
   ```

   æœåŠ¡å™¨å¯åŠ¨åï¼Œä½ å°†åœ¨æ§åˆ¶å°çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„è¾“å‡ºï¼š

   ```
   ğŸ‰ GraphQL Server running at http://localhost:4000/api!
   ```

## ğŸŒŸ åŠŸèƒ½æ¦‚è¿°

- **ç®¡ç†å‘˜ç®¡ç†**: æ”¯æŒç®¡ç†å‘˜çš„æ³¨å†Œã€ç™»å½•å’Œä¿¡æ¯æŸ¥è¯¢ã€‚
- **ç”¨æˆ·ç®¡ç†**: ç®¡ç†å‘˜å¯ä»¥åˆ›å»ºã€æ›´æ–°å’Œåˆ é™¤ç”¨æˆ·ä¿¡æ¯ã€‚
- **å¥½å‹ç®¡ç†**: ç®¡ç†å‘˜å¯ä»¥ç®¡ç†å¥½å‹ä¿¡æ¯ï¼ŒåŒ…æ‹¬åˆ›å»ºã€æ›´æ–°å’Œåˆ é™¤å¥½å‹ã€‚
- **æ¶ˆæ¯ç®¡ç†**: ç®¡ç†å‘˜å¯ä»¥ç®¡ç†èŠå¤©æ¶ˆæ¯ï¼ŒåŒ…æ‹¬åˆ›å»ºã€æ›´æ–°å’Œåˆ é™¤æ¶ˆæ¯ã€‚

## ğŸ“® API æ“ä½œç¤ºä¾‹

### 1. ç®¡ç†å‘˜æ“ä½œ

#### æ³¨å†Œç®¡ç†å‘˜

```graphql
mutation {
  signUp(
    adminname: "YuFan2"
    email: "1838248653@qq.com"
    password: "FoxAzuremyBaka"
  )
}
```

#### ç™»å½•ç®¡ç†å‘˜

```graphql
mutation {
  signIn(email: "1838248655@qq.com", password: "FoxAzuremyBaka")
}
```

#### è·å–å½“å‰ç®¡ç†å‘˜ä¿¡æ¯

```graphql
{
  me {
    adminname
    email
    id
  }
}
```

#### è·å–ç‰¹å®šç®¡ç†å‘˜ä¿¡æ¯

```graphql
{
  admin(adminname: "YuFan") {
    adminname
    email
    id
  }
}
```

#### è·å–æ‰€æœ‰ç®¡ç†å‘˜ä¿¡æ¯

```graphql
{
  admins {
    adminname
    email
    id
  }
}
```

### 2. ç”¨æˆ·æ“ä½œ

#### åˆ›å»ºç”¨æˆ·

```graphql
mutation {
  createUser(
    username: "bakaFox"
    password: "Foxbaka"
    email: "yukiisait@outlook.jp"
  ) {
    username
  }
}
```

#### è·å–æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯

```graphql
{
  users {
    username
  }
}
```

#### è·å–ç‰¹å®šç”¨æˆ·ä¿¡æ¯

```graphql
{
  user(username: "A") {
    username
  }
}
```

#### åˆ é™¤ç”¨æˆ·

```graphql
mutation {
  removeUser(id: "6786f89db6958ca3f40ebe00")
}
```

#### æ›´æ–°ç”¨æˆ·ä¿¡æ¯

```graphql
mutation {
  updateUser(id: "678683b2826f276c248caf27", email: "yufan@outlook.jr904p") {
    email
  }
}
```

### 3. å¥½å‹æ“ä½œ

#### è·å–æ‰€æœ‰å¥½å‹ä¿¡æ¯

```graphql
{
  friends {
    name
  }
}
```

#### åˆ›å»ºå¥½å‹

```graphql
mutation {
  createFriend(name: "Azuremy", detail: "ä¸€åªå’”å§") {
    id
  }
}
```

#### æ›´æ–°å¥½å‹ä¿¡æ¯

```graphql
mutation {
  updateFriend(id: "678700601ff0b80704cea416", detail: "ä¸€åªæœ‰å¾ˆå¤šå¯å–ä¹‹å¤„çš„å’”") {
    detail
  }
}
```

#### åˆ é™¤å¥½å‹

```graphql
mutation {
  removeFriend(id: "6786fb851ff0b80704cea40d")
}
```

## ğŸ¾ è´¡çŒ®

æ¬¢è¿ä»»ä½•å½¢å¼çš„è´¡çŒ®ï¼å¦‚æœä½ æœ‰å¥½çš„æƒ³æ³•æˆ–å‘ç°äº†bugï¼Œè¯·æäº¤Issueæˆ–Pull Requestï¼Œæˆ‘ä»¬æœŸå¾…ä½ çš„åŠ å…¥ï¼(ï½¡â€¢Ì€á´—-)âœ§

## ğŸ’– æ„Ÿè°¢

æ„Ÿè°¢ä½ å¯¹å–µå’•åå°ç®¡ç†å¹³å°çš„å…³æ³¨ï¼å¸Œæœ›ä½ åœ¨è¿™é‡Œäº«å—ç®¡ç†çš„ä¹è¶£ï¼Œè½»æ¾åº”å¯¹å„ç§æŒ‘æˆ˜ï¼(â‰§Ï‰â‰¦) å¦‚æœä½ å–œæ¬¢è¿™ä¸ªé¡¹ç›®ï¼Œæ¬¢è¿ç»™æˆ‘ä»¬æ˜Ÿæ˜Ÿâ­ï¸ï¼
